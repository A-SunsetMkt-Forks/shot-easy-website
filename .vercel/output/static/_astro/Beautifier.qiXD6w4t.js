import{j as d}from"./jsx-runtime.l6YZH1ic.js";import{r as s,R as ie}from"./index.OjgoNOWw.js";import{S as pn,b as Sn}from"./ReactKonvaCore.BpeN4Hvy.js";import{ShapeLine as xn}from"./Shape.cINv3coG.js";import{Icon as Be,Icons as jt}from"./Icons.tgBymh6s.js";import{i as wn,d as Le,t as yn,j as Cn,c as Ae,k as $n,s as En,l as Mn}from"./utils.laoKADR4.js";import{MacbookPro as kn}from"./MacbookPro.d6DQeqVC.js";import{IphonePro as Rn}from"./IphonePro.-COFyv-G.js";import{SelectDropdown as jn}from"./SelectDropdown.4ou1T1pp.js";import{Toolbar as Pn}from"./Toolbar.UtvPIYps.js";import{c as In,u as Dn}from"./useKeyboardShortcuts.7wPXgwmH.js";import{u as Ln}from"./usePaste.lqKQ1tp5.js";import{W as Tn,D as On}from"./DrawerSide.qynFbtCH.js";import{DownBtn as Wn}from"./DownBtn.349ZLWXT.js";import{m as zn}from"./index.HtDAqBSS.js";import{L as Hn,B as Pt}from"./button.ncRKj3GL.js";import{b as dt,_ as ht,c as pe,a as xe,e as we,d as _n}from"./toArray.nS7GZgeY.js";import"./index.p7hr_Xrf.js";import{c as ye,_ as de,t as Nn,P as Bn,j as An,w as st,g as Vt,m as Xt,r as Gt,f as J,$ as Yt,C as Kt,D as Jt,x as Fn,J as qn,M as Un,N as Vn,Q as Xn,z as Gn,u as Yn}from"./reactNode.B2HQCb_2.js";import{u as ft,a as Kn,b as Jn}from"./useSize.RVMIuZji.js";import{K as le}from"./KeyCode.at7loAuH.js";import{T as Qn}from"./index.rPfIouvQ.js";import{C as It,S as Zn,I as ea}from"./ColorPicker.OD3HGCka.js";import{R as $e}from"./BackgroundSelect.53NN4zPn.js";import{W as ta}from"./index.9yN8RVW1.js";import{U as na}from"./index.AGIWuGJs.js";import"./index.vUmhMLDg.js";import"./RightOutlined.ahybTxGS.js";import"./Portal.Pe3gDrPT.js";import"./collapse.aS6vX33V.js";import"./useCSSVarCls.MDYFJu2S.js";import"./gapSize.O5Z3aApn.js";import"./WidthDropdown.TqFfWF8O.js";import"./EmojiSelect.5Vxr-FtA.js";import"./index._stZYUJe.js";import"./index.RQZhvM3G.js";import"./context.RmN6aBgd.js";import"./pickAttrs.PdgW-4Wc.js";import"./EyeOutlined.kiebVQeb.js";import"./CheckOutlined.P7VL5mZ2.js";import"./CloseOutlined.0lRK38iS.js";import"./progress.KQvPVk93.js";function aa(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const a=document.implementation.createHTMLDocument(),n=a.createElement("base"),r=a.createElement("a");return a.head.appendChild(n),a.body.appendChild(r),t&&(n.href=t),r.href=e,r.href}const ra=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Re(e){const t=[];for(let a=0,n=e.length;a<n;a++)t.push(e[a]);return t}function Je(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function ia(e){const t=Je(e,"border-left-width"),a=Je(e,"border-right-width");return e.clientWidth+t+a}function oa(e){const t=Je(e,"border-top-width"),a=Je(e,"border-bottom-width");return e.clientHeight+t+a}function Qt(e,t={}){const a=t.width||ia(e),n=t.height||oa(e);return{width:a,height:n}}function la(){let e,t;try{t=process}catch{}const a=t&&t.env?t.env.devicePixelRatio:null;return a&&(e=parseInt(a,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const me=16384;function sa(e){(e.width>me||e.height>me)&&(e.width>me&&e.height>me?e.width>e.height?(e.height*=me/e.width,e.width=me):(e.width*=me/e.height,e.height=me):e.width>me?(e.height*=me/e.width,e.width=me):(e.width*=me/e.height,e.height=me))}function Qe(e){return new Promise((t,a)=>{const n=new Image;n.decode=()=>t(n),n.onload=()=>t(n),n.onerror=a,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function ca(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function ua(e,t,a){const n="http://www.w3.org/2000/svg",r=document.createElementNS(n,"svg"),i=document.createElementNS(n,"foreignObject");return r.setAttribute("width",`${t}`),r.setAttribute("height",`${a}`),r.setAttribute("viewBox",`0 0 ${t} ${a}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),r.appendChild(i),i.appendChild(e),ca(r)}const he=(e,t)=>{if(e instanceof t)return!0;const a=Object.getPrototypeOf(e);return a===null?!1:a.constructor.name===t.name||he(a,t)};function da(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function ha(e){return Re(e).map(t=>{const a=e.getPropertyValue(t),n=e.getPropertyPriority(t);return`${t}: ${a}${n?" !important":""};`}).join(" ")}function fa(e,t,a){const n=`.${e}:${t}`,r=a.cssText?da(a):ha(a);return document.createTextNode(`${n}{${r}}`)}function Dt(e,t,a){const n=window.getComputedStyle(e,a),r=n.getPropertyValue("content");if(r===""||r==="none")return;const i=ra();try{t.className=`${t.className} ${i}`}catch{return}const l=document.createElement("style");l.appendChild(fa(i,a,n)),t.appendChild(l)}function ma(e,t){Dt(e,t,":before"),Dt(e,t,":after")}const Lt="application/font-woff",Tt="image/jpeg",ga={woff:Lt,woff2:Lt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Tt,jpeg:Tt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function va(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function mt(e){const t=va(e).toLowerCase();return ga[t]||""}function ba(e){return e.split(/,/)[1]}function ct(e){return e.search(/^(data:)/)!==-1}function Zt(e,t){return`data:${t};base64,${e}`}async function en(e,t,a){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const r=await n.blob();return new Promise((i,l)=>{const o=new FileReader;o.onerror=l,o.onloadend=()=>{try{i(a({res:n,result:o.result}))}catch(c){l(c)}},o.readAsDataURL(r)})}const it={};function pa(e,t,a){let n=e.replace(/\?.*/,"");return a&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function gt(e,t,a){const n=pa(e,t,a.includeQueryParams);if(it[n]!=null)return it[n];a.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let r;try{const i=await en(e,a.fetchRequestInit,({res:l,result:o})=>(t||(t=l.headers.get("Content-Type")||""),ba(o)));r=Zt(i,t)}catch(i){r=a.imagePlaceholder||"";let l=`Failed to fetch resource: ${e}`;i&&(l=typeof i=="string"?i:i.message),l&&console.warn(l)}return it[n]=r,r}async function Sa(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Qe(t)}async function xa(e,t){if(e.currentSrc){const i=document.createElement("canvas"),l=i.getContext("2d");i.width=e.clientWidth,i.height=e.clientHeight,l?.drawImage(e,0,0,i.width,i.height);const o=i.toDataURL();return Qe(o)}const a=e.poster,n=mt(a),r=await gt(a,n,t);return Qe(r)}async function wa(e){var t;try{if(!((t=e?.contentDocument)===null||t===void 0)&&t.body)return await Ze(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)}async function ya(e,t){return he(e,HTMLCanvasElement)?Sa(e):he(e,HTMLVideoElement)?xa(e,t):he(e,HTMLIFrameElement)?wa(e):e.cloneNode(!1)}const Ca=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT";async function $a(e,t,a){var n,r;let i=[];return Ca(e)&&e.assignedNodes?i=Re(e.assignedNodes()):he(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?i=Re(e.contentDocument.body.childNodes):i=Re(((r=e.shadowRoot)!==null&&r!==void 0?r:e).childNodes),i.length===0||he(e,HTMLVideoElement)||await i.reduce((l,o)=>l.then(()=>Ze(o,a)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function Ea(e,t){const a=t.style;if(!a)return;const n=window.getComputedStyle(e);n.cssText?(a.cssText=n.cssText,a.transformOrigin=n.transformOrigin):Re(n).forEach(r=>{let i=n.getPropertyValue(r);r==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),he(e,HTMLIFrameElement)&&r==="display"&&i==="inline"&&(i="block"),r==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),a.setProperty(r,i,n.getPropertyPriority(r))})}function Ma(e,t){he(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),he(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function ka(e,t){if(he(e,HTMLSelectElement)){const a=t,n=Array.from(a.children).find(r=>e.value===r.getAttribute("value"));n&&n.setAttribute("selected","")}}function Ra(e,t){return he(t,Element)&&(Ea(e,t),ma(e,t),Ma(e,t),ka(e,t)),t}async function ja(e,t){const a=e.querySelectorAll?e.querySelectorAll("use"):[];if(a.length===0)return e;const n={};for(let i=0;i<a.length;i++){const o=a[i].getAttribute("xlink:href");if(o){const c=e.querySelector(o),u=document.querySelector(o);!c&&u&&!n[o]&&(n[o]=await Ze(u,t,!0))}}const r=Object.values(n);if(r.length){const i="http://www.w3.org/1999/xhtml",l=document.createElementNS(i,"svg");l.setAttribute("xmlns",i),l.style.position="absolute",l.style.width="0",l.style.height="0",l.style.overflow="hidden",l.style.display="none";const o=document.createElementNS(i,"defs");l.appendChild(o);for(let c=0;c<r.length;c++)o.appendChild(r[c]);e.appendChild(l)}return e}async function Ze(e,t,a){return!a&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>ya(n,t)).then(n=>$a(e,n,t)).then(n=>Ra(e,n)).then(n=>ja(n,t))}const tn=/url\((['"]?)([^'"]+?)\1\)/g,Pa=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ia=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Da(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function La(e){const t=[];return e.replace(tn,(a,n,r)=>(t.push(r),a)),t.filter(a=>!ct(a))}async function Ta(e,t,a,n,r){try{const i=a?aa(t,a):t,l=mt(t);let o;if(r){const c=await r(i);o=Zt(c,l)}else o=await gt(i,l,n);return e.replace(Da(t),`$1${o}$3`)}catch{}return e}function Oa(e,{preferredFontFormat:t}){return t?e.replace(Ia,a=>{for(;;){const[n,,r]=Pa.exec(a)||[];if(!r)return"";if(r===t)return`src: ${n};`}}):e}function nn(e){return e.search(tn)!==-1}async function an(e,t,a){if(!nn(e))return e;const n=Oa(e,a);return La(n).reduce((i,l)=>i.then(o=>Ta(o,l,t,a)),Promise.resolve(n))}async function Ye(e,t,a){var n;const r=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(r){const i=await an(r,null,a);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function Wa(e,t){await Ye("background",e,t)||await Ye("background-image",e,t),await Ye("mask",e,t)||await Ye("mask-image",e,t)}async function za(e,t){const a=he(e,HTMLImageElement);if(!(a&&!ct(e.src))&&!(he(e,SVGImageElement)&&!ct(e.href.baseVal)))return;const n=a?e.src:e.href.baseVal,r=await gt(n,mt(n),t);await new Promise((i,l)=>{e.onload=i,e.onerror=l;const o=e;o.decode&&(o.decode=i),o.loading==="lazy"&&(o.loading="eager"),a?(e.srcset="",e.src=r):e.href.baseVal=r})}async function Ha(e,t){const n=Re(e.childNodes).map(r=>rn(r,t));await Promise.all(n).then(()=>e)}async function rn(e,t){he(e,Element)&&(await Wa(e,t),await za(e,t),await Ha(e,t))}function _a(e,t){const{style:a}=e;t.backgroundColor&&(a.backgroundColor=t.backgroundColor),t.width&&(a.width=`${t.width}px`),t.height&&(a.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(r=>{a[r]=n[r]}),e}const Ot={};async function Wt(e){let t=Ot[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},Ot[e]=t,t}async function zt(e,t){let a=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,i=(a.match(/url\([^)]+\)/g)||[]).map(async l=>{let o=l.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),en(o,t.fetchRequestInit,({result:c})=>(a=a.replace(l,`url(${c})`),[l,c]))});return Promise.all(i).then(()=>a)}function Ht(e){if(e==null)return[];const t=[],a=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(a,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=r.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(r,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,l="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(l,"gi");for(;;){let c=i.exec(n);if(c===null){if(c=o.exec(n),c===null)break;i.lastIndex=o.lastIndex}else o.lastIndex=i.lastIndex;t.push(c[0])}return t}async function Na(e,t){const a=[],n=[];return e.forEach(r=>{if("cssRules"in r)try{Re(r.cssRules||[]).forEach((i,l)=>{if(i.type===CSSRule.IMPORT_RULE){let o=l+1;const c=i.href,u=Wt(c).then(m=>zt(m,t)).then(m=>Ht(m).forEach(S=>{try{r.insertRule(S,S.startsWith("@import")?o+=1:r.cssRules.length)}catch(E){console.error("Error inserting rule from remote css",{rule:S,error:E})}})).catch(m=>{console.error("Error loading remote css",m.toString())});n.push(u)}})}catch(i){const l=e.find(o=>o.href==null)||document.styleSheets[0];r.href!=null&&n.push(Wt(r.href).then(o=>zt(o,t)).then(o=>Ht(o).forEach(c=>{l.insertRule(c,r.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",i)}}),Promise.all(n).then(()=>(e.forEach(r=>{if("cssRules"in r)try{Re(r.cssRules||[]).forEach(i=>{a.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${r.href}`,i)}}),a))}function Ba(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>nn(t.style.getPropertyValue("src")))}async function Aa(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const a=Re(e.ownerDocument.styleSheets),n=await Na(a,t);return Ba(n)}async function Fa(e,t){const a=await Aa(e,t);return(await Promise.all(a.map(r=>{const i=r.parentStyleSheet?r.parentStyleSheet.href:null;return an(r.cssText,i,t)}))).join(`
`)}async function qa(e,t){const a=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Fa(e,t);if(a){const n=document.createElement("style"),r=document.createTextNode(a);n.appendChild(r),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function Ua(e,t={}){const{width:a,height:n}=Qt(e,t),r=await Ze(e,t,!0);return await qa(r,t),await rn(r,t),_a(r,t),await ua(r,a,n)}async function Va(e,t={}){const{width:a,height:n}=Qt(e,t),r=await Ua(e,t),i=await Qe(r),l=document.createElement("canvas"),o=l.getContext("2d"),c=t.pixelRatio||la(),u=t.canvasWidth||a,m=t.canvasHeight||n;return l.width=u*c,l.height=m*c,t.skipAutoScale||sa(l),l.style.width=`${u}`,l.style.height=`${m}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,l.width,l.height)),o.drawImage(i,0,0,l.width,l.height),l}var ze=s.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}});function ut(e,t,a){return(e-t)/(a-t)}function vt(e,t,a,n){var r=ut(t,a,n),i={};switch(e){case"rtl":i.right="".concat(r*100,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(r*100,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(r*100,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(r*100,"%"),i.transform="translateX(-50%)";break}return i}function Fe(e,t){return Array.isArray(e)?e[t]:e}var Xa=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange","onChangeComplete"],Ga=s.forwardRef(function(e,t){var a,n,r=e.prefixCls,i=e.value,l=e.valueIndex,o=e.onStartMove,c=e.style,u=e.render,m=e.dragging,S=e.onOffsetChange,E=e.onChangeComplete,b=dt(e,Xa),h=s.useContext(ze),x=h.min,C=h.max,g=h.direction,f=h.disabled,v=h.keyboard,I=h.range,y=h.tabIndex,$=h.ariaLabelForHandle,p=h.ariaLabelledByForHandle,w=h.ariaValueTextFormatterForHandle,k=h.styles,R=h.classNames,T="".concat(r,"-handle"),W=function(P){f||o(P,l)},A=function(P){if(!f&&v){var j=null;switch(P.which||P.keyCode){case le.LEFT:j=g==="ltr"||g==="btt"?-1:1;break;case le.RIGHT:j=g==="ltr"||g==="btt"?1:-1;break;case le.UP:j=g!=="ttb"?1:-1;break;case le.DOWN:j=g!=="ttb"?-1:1;break;case le.HOME:j="min";break;case le.END:j="max";break;case le.PAGE_UP:j=2;break;case le.PAGE_DOWN:j=-2;break}j!==null&&(P.preventDefault(),S(j,l))}},te=function(P){switch(P.which||P.keyCode){case le.LEFT:case le.RIGHT:case le.UP:case le.DOWN:case le.HOME:case le.END:case le.PAGE_UP:case le.PAGE_DOWN:E?.();break}},F=vt(g,i,x,C),B=s.createElement("div",ht({ref:t,className:ye(T,(a={},pe(a,"".concat(T,"-").concat(l+1),I),pe(a,"".concat(T,"-dragging"),m),a),R.handle),style:de(de(de({},F),c),k.handle),onMouseDown:W,onTouchStart:W,onKeyDown:A,onKeyUp:te,tabIndex:f?null:Fe(y,l),role:"slider","aria-valuemin":x,"aria-valuemax":C,"aria-valuenow":i,"aria-disabled":f,"aria-label":Fe($,l),"aria-labelledby":Fe(p,l),"aria-valuetext":(n=Fe(w,l))===null||n===void 0?void 0:n(i),"aria-orientation":g==="ltr"||g==="rtl"?"horizontal":"vertical"},b));return u&&(B=u(B,{index:l,prefixCls:r,value:i,dragging:m})),B}),Ya=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],Ka=s.forwardRef(function(e,t){var a=e.prefixCls,n=e.style,r=e.onStartMove,i=e.onOffsetChange,l=e.values,o=e.handleRender,c=e.draggingIndex,u=dt(e,Ya),m=s.useRef({});return s.useImperativeHandle(t,function(){return{focus:function(E){var b;(b=m.current[E])===null||b===void 0||b.focus()}}}),s.createElement(s.Fragment,null,l.map(function(S,E){return s.createElement(Ga,ht({ref:function(h){h?m.current[E]=h:delete m.current[E]},dragging:c===E,prefixCls:a,style:Fe(n,E),key:E,value:S,valueIndex:E,onStartMove:r,onOffsetChange:i,render:o},u))}))});function _t(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function Ja(e,t,a,n,r,i,l,o,c){var u=s.useState(null),m=xe(u,2),S=m[0],E=m[1],b=s.useState(-1),h=xe(b,2),x=h[0],C=h[1],g=s.useState(a),f=xe(g,2),v=f[0],I=f[1],y=s.useState(a),$=xe(y,2),p=$[0],w=$[1],k=s.useRef(null),R=s.useRef(null);s.useEffect(function(){x===-1&&I(a)},[a,x]),s.useEffect(function(){return function(){document.removeEventListener("mousemove",k.current),document.removeEventListener("mouseup",R.current),document.removeEventListener("touchmove",k.current),document.removeEventListener("touchend",R.current)}},[]);var T=function(D,P){v.some(function(j,Y){return j!==D[Y]})&&(P!==void 0&&E(P),I(D),l(D))},W=function(D,P){if(D===-1){var j=p[0],Y=p[p.length-1],X=n-j,q=r-Y,V=P*(r-n);V=Math.max(V,X),V=Math.min(V,q);var K=i(j+V);V=K-j;var G=p.map(function(Z){return Z+V});T(G)}else{var z=(r-n)*P,ne=we(v);ne[D]=p[D];var Q=c(ne,z,D,"dist");T(Q.values,Q.value)}},A=s.useRef(W);A.current=W;var te=function(D,P,j){D.stopPropagation();var Y=j||a,X=Y[P];C(P),E(X),w(Y);var q=_t(D),V=q.pageX,K=q.pageY,G=function(Q){Q.preventDefault();var Z=_t(Q),ge=Z.pageX,Ee=Z.pageY,H=ge-V,_=Ee-K,O=e.current.getBoundingClientRect(),fe=O.width,ue=O.height,U;switch(t){case"btt":U=-_/ue;break;case"ttb":U=_/ue;break;case"rtl":U=-H/fe;break;default:U=H/fe}A.current(P,U)},z=function ne(Q){Q.preventDefault(),document.removeEventListener("mouseup",ne),document.removeEventListener("mousemove",G),document.removeEventListener("touchend",ne),document.removeEventListener("touchmove",G),k.current=null,R.current=null,C(-1),o()};document.addEventListener("mouseup",z),document.addEventListener("mousemove",G),document.addEventListener("touchend",z),document.addEventListener("touchmove",G),k.current=G,R.current=z},F=s.useMemo(function(){var B=we(a).sort(function(P,j){return P-j}),D=we(v).sort(function(P,j){return P-j});return B.every(function(P,j){return P===D[j]})?v:a},[a,v]);return[x,S,F,te]}function Qa(e,t,a,n,r,i){var l=s.useCallback(function(b){var h=isFinite(b)?b:e;return h=Math.min(t,b),h=Math.max(e,h),h},[e,t]),o=s.useCallback(function(b){if(a!==null){var h=e+Math.round((l(b)-e)/a)*a,x=function(v){return(String(v).split(".")[1]||"").length},C=Math.max(x(a),x(t),x(e)),g=Number(h.toFixed(C));return e<=g&&g<=t?g:null}return null},[a,e,t,l]),c=s.useCallback(function(b){var h=l(b),x=n.map(function(f){return f.value});a!==null&&x.push(o(b)),x.push(e,t);var C=x[0],g=t-e;return x.forEach(function(f){var v=Math.abs(h-f);v<=g&&(C=f,g=v)}),C},[e,t,n,a,l,o]),u=function b(h,x,C){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof x=="number"){var f,v=h[C],I=v+x,y=[];n.forEach(function(R){y.push(R.value)}),y.push(e,t),y.push(o(v));var $=x>0?1:-1;g==="unit"?y.push(o(v+$*a)):y.push(o(I)),y=y.filter(function(R){return R!==null}).filter(function(R){return x<0?R<=v:R>=v}),g==="unit"&&(y=y.filter(function(R){return R!==v}));var p=g==="unit"?v:I;f=y[0];var w=Math.abs(f-p);if(y.forEach(function(R){var T=Math.abs(R-p);T<w&&(f=R,w=T)}),f===void 0)return x<0?e:t;if(g==="dist")return f;if(Math.abs(x)>1){var k=we(h);return k[C]=f,b(k,x-$,C,g)}return f}else{if(x==="min")return e;if(x==="max")return t}},m=function(h,x,C){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",f=h[C],v=u(h,x,C,g);return{value:v,changed:v!==f}},S=function(h){return i===null&&h===0||typeof i=="number"&&h<i},E=function(h,x,C){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",f=h.map(c),v=f[C],I=u(f,x,C,g);if(f[C]=I,r===!1){var y=i||0;C>0&&f[C-1]!==v&&(f[C]=Math.max(f[C],f[C-1]+y)),C<f.length-1&&f[C+1]!==v&&(f[C]=Math.min(f[C],f[C+1]-y))}else if(typeof i=="number"||i===null){for(var $=C+1;$<f.length;$+=1)for(var p=!0;S(f[$]-f[$-1])&&p;){var w=m(f,1,$);f[$]=w.value,p=w.changed}for(var k=C;k>0;k-=1)for(var R=!0;S(f[k]-f[k-1])&&R;){var T=m(f,-1,k-1);f[k-1]=T.value,R=T.changed}for(var W=f.length-1;W>0;W-=1)for(var A=!0;S(f[W]-f[W-1])&&A;){var te=m(f,-1,W-1);f[W-1]=te.value,A=te.changed}for(var F=0;F<f.length-1;F+=1)for(var B=!0;S(f[F+1]-f[F])&&B;){var D=m(f,1,F+1);f[F+1]=D.value,B=D.changed}}return{value:f[C],values:f}};return[c,E]}function Za(e){var t=e.prefixCls,a=e.style,n=e.children,r=e.value,i=e.onClick,l=s.useContext(ze),o=l.min,c=l.max,u=l.direction,m=l.includedStart,S=l.includedEnd,E=l.included,b="".concat(t,"-text"),h=vt(u,r,o,c);return s.createElement("span",{className:ye(b,pe({},"".concat(b,"-active"),E&&m<=r&&r<=S)),style:de(de({},h),a),onMouseDown:function(C){C.stopPropagation()},onClick:function(){i(r)}},n)}function er(e){var t=e.prefixCls,a=e.marks,n=e.onClick,r="".concat(t,"-mark");return a.length?s.createElement("div",{className:r},a.map(function(i){var l=i.value,o=i.style,c=i.label;return s.createElement(Za,{key:l,prefixCls:r,style:o,value:l,onClick:n},c)})):null}function tr(e){var t=e.prefixCls,a=e.value,n=e.style,r=e.activeStyle,i=s.useContext(ze),l=i.min,o=i.max,c=i.direction,u=i.included,m=i.includedStart,S=i.includedEnd,E="".concat(t,"-dot"),b=u&&m<=a&&a<=S,h=de(de({},vt(c,a,l,o)),typeof n=="function"?n(a):n);return b&&(h=de(de({},h),typeof r=="function"?r(a):r)),s.createElement("span",{className:ye(E,pe({},"".concat(E,"-active"),b)),style:h})}function nr(e){var t=e.prefixCls,a=e.marks,n=e.dots,r=e.style,i=e.activeStyle,l=s.useContext(ze),o=l.min,c=l.max,u=l.step,m=s.useMemo(function(){var S=new Set;if(a.forEach(function(b){S.add(b.value)}),n&&u!==null)for(var E=o;E<=c;)S.add(E),E+=u;return Array.from(S)},[o,c,u,n,a]);return s.createElement("div",{className:"".concat(t,"-step")},m.map(function(S){return s.createElement(tr,{prefixCls:t,key:S,value:S,style:r,activeStyle:i})}))}function Nt(e){var t,a=e.prefixCls,n=e.style,r=e.start,i=e.end,l=e.index,o=e.onStartMove,c=e.replaceCls,u=s.useContext(ze),m=u.direction,S=u.min,E=u.max,b=u.disabled,h=u.range,x=u.classNames,C="".concat(a,"-track"),g=ut(r,S,E),f=ut(i,S,E),v=function(p){!b&&o&&o(p,-1)},I={};switch(m){case"rtl":I.right="".concat(g*100,"%"),I.width="".concat(f*100-g*100,"%");break;case"btt":I.bottom="".concat(g*100,"%"),I.height="".concat(f*100-g*100,"%");break;case"ttb":I.top="".concat(g*100,"%"),I.height="".concat(f*100-g*100,"%");break;default:I.left="".concat(g*100,"%"),I.width="".concat(f*100-g*100,"%")}var y=c||ye(C,(t={},pe(t,"".concat(C,"-").concat(l+1),l!==null&&h),pe(t,"".concat(a,"-track-draggable"),o),t),x.track);return s.createElement("div",{className:y,style:de(de({},I),n),onMouseDown:v,onTouchStart:v})}function ar(e){var t=e.prefixCls,a=e.style,n=e.values,r=e.startPoint,i=e.onStartMove,l=s.useContext(ze),o=l.included,c=l.range,u=l.min,m=l.styles,S=l.classNames,E=s.useMemo(function(){if(!c){if(n.length===0)return[];var h=r??u,x=n[0];return[{start:Math.min(h,x),end:Math.max(h,x)}]}for(var C=[],g=0;g<n.length-1;g+=1)C.push({start:n[g],end:n[g+1]});return C},[n,c,r,u]),b=null;return(S.tracks||m.tracks)&&(b=s.createElement(Nt,{index:null,prefixCls:t,start:E[0].start,end:E[E.length-1].end,replaceCls:ye(S.tracks,"".concat(t,"-tracks")),style:m.tracks})),o?s.createElement(s.Fragment,null,b,E.map(function(h,x){var C=h.start,g=h.end;return s.createElement(Nt,{index:x,prefixCls:t,style:de(de({},Fe(a,x)),m.track),start:C,end:g,key:x,onStartMove:i})})):null}var rr=s.forwardRef(function(e,t){var a,n=e.prefixCls,r=n===void 0?"rc-slider":n,i=e.className,l=e.style,o=e.classNames,c=e.styles,u=e.disabled,m=u===void 0?!1:u,S=e.keyboard,E=S===void 0?!0:S,b=e.autoFocus,h=e.onFocus,x=e.onBlur,C=e.min,g=C===void 0?0:C,f=e.max,v=f===void 0?100:f,I=e.step,y=I===void 0?1:I,$=e.value,p=e.defaultValue,w=e.range,k=e.count,R=e.onChange,T=e.onBeforeChange,W=e.onAfterChange,A=e.onChangeComplete,te=e.allowCross,F=te===void 0?!0:te,B=e.pushable,D=B===void 0?!1:B,P=e.draggableTrack,j=e.reverse,Y=e.vertical,X=e.included,q=X===void 0?!0:X,V=e.startPoint,K=e.trackStyle,G=e.handleStyle,z=e.railStyle,ne=e.dotStyle,Q=e.activeDotStyle,Z=e.marks,ge=e.dots,Ee=e.handleRender,H=e.tabIndex,_=H===void 0?0:H,O=e.ariaLabelForHandle,fe=e.ariaLabelledByForHandle,ue=e.ariaValueTextFormatterForHandle,U=s.useRef(),ae=s.useRef(),je=s.useMemo(function(){return Y?j?"ttb":"btt":j?"rtl":"ltr"},[j,Y]),ce=s.useMemo(function(){return isFinite(g)?g:0},[g]),Pe=s.useMemo(function(){return isFinite(v)?v:100},[v]),Me=s.useMemo(function(){return y!==null&&y<=0?1:y},[y]),et=s.useMemo(function(){return typeof D=="boolean"?D?Me:!1:D>=0?D:!1},[D,Me]),He=s.useMemo(function(){var ee=Object.keys(Z||{});return ee.map(function(N){var L=Z[N],oe={value:Number(N)};return L&&_n(L)==="object"&&!s.isValidElement(L)&&("label"in L||"style"in L)?(oe.style=L.style,oe.label=L.label):oe.label=L,oe}).filter(function(N){var L=N.label;return L||typeof L=="number"}).sort(function(N,L){return N.value-L.value})},[Z]),tt=Qa(ce,Pe,Me,He,F,et),Ve=xe(tt,2),_e=Ve[0],Xe=Ve[1],Ge=ft(p,{value:$}),qe=xe(Ge,2),Se=qe[0],nt=qe[1],ve=s.useMemo(function(){var ee=Se==null?[]:Array.isArray(Se)?Se:[Se],N=xe(ee,1),L=N[0],oe=L===void 0?ce:L,re=Se===null?[]:[oe];if(w){if(re=we(ee),k||Se===void 0){var Ce=k>=0?k+1:2;for(re=re.slice(0,Ce);re.length<Ce;){var Oe;re.push((Oe=re[re.length-1])!==null&&Oe!==void 0?Oe:ce)}}re.sort(function(We,De){return We-De})}return re.forEach(function(We,De){re[De]=_e(We)}),re},[Se,w,ce,k,_e]),Te=s.useRef(ve);Te.current=ve;var M=function(N){return w?N:N[0]},se=function(N){var L=we(N).sort(function(oe,re){return oe-re});R&&!Bn(L,Te.current,!0)&&R(M(L)),nt(L)},be=function(){W?.(M(Te.current)),Nn(!W,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),A?.(M(Te.current))},ke=Ja(ae,je,ve,ce,Pe,_e,se,be,Xe),Ie=xe(ke,4),bt=Ie[0],un=Ie[1],at=Ie[2],pt=Ie[3],St=function(N,L){if(!m){var oe=0,re=Pe-ce;ve.forEach(function(Oe,We){var De=Math.abs(N-Oe);De<=re&&(re=De,oe=We)});var Ce=we(ve);Ce[oe]=N,w&&!ve.length&&k===void 0&&Ce.push(N),T?.(M(Ce)),se(Ce),L&&pt(L,oe,Ce)}},dn=function(N){N.preventDefault();var L=ae.current.getBoundingClientRect(),oe=L.width,re=L.height,Ce=L.left,Oe=L.top,We=L.bottom,De=L.right,kt=N.clientX,Rt=N.clientY,Ue;switch(je){case"btt":Ue=(We-Rt)/re;break;case"ttb":Ue=(Rt-Oe)/re;break;case"rtl":Ue=(De-kt)/oe;break;default:Ue=(kt-Ce)/oe}var bn=ce+Ue*(Pe-ce);St(_e(bn),N)},hn=s.useState(null),xt=xe(hn,2),rt=xt[0],wt=xt[1],fn=function(N,L){if(!m){var oe=Xe(ve,N,L);T?.(M(ve)),se(oe.values),wt(oe.value)}};s.useEffect(function(){if(rt!==null){var ee=ve.indexOf(rt);ee>=0&&U.current.focus(ee)}wt(null)},[rt]);var mn=s.useMemo(function(){return P&&Me===null?!1:P},[P,Me]),yt=function(N,L){pt(N,L),T?.(M(Te.current))},Ct=bt!==-1;s.useEffect(function(){if(!Ct){var ee=ve.lastIndexOf(un);U.current.focus(ee)}},[Ct]);var Ne=s.useMemo(function(){return we(at).sort(function(ee,N){return ee-N})},[at]),gn=s.useMemo(function(){return w?[Ne[0],Ne[Ne.length-1]]:[ce,Ne[0]]},[Ne,w,ce]),$t=xe(gn,2),Et=$t[0],Mt=$t[1];s.useImperativeHandle(t,function(){return{focus:function(){U.current.focus(0)},blur:function(){var N=document,L=N.activeElement;ae.current.contains(L)&&L?.blur()}}}),s.useEffect(function(){b&&U.current.focus(0)},[]);var vn=s.useMemo(function(){return{min:ce,max:Pe,direction:je,disabled:m,keyboard:E,step:Me,included:q,includedStart:Et,includedEnd:Mt,range:w,tabIndex:_,ariaLabelForHandle:O,ariaLabelledByForHandle:fe,ariaValueTextFormatterForHandle:ue,styles:c||{},classNames:o||{}}},[ce,Pe,je,m,E,Me,q,Et,Mt,w,_,O,fe,ue,c,o]);return s.createElement(ze.Provider,{value:vn},s.createElement("div",{ref:ae,className:ye(r,i,(a={},pe(a,"".concat(r,"-disabled"),m),pe(a,"".concat(r,"-vertical"),Y),pe(a,"".concat(r,"-horizontal"),!Y),pe(a,"".concat(r,"-with-marks"),He.length),a)),style:l,onMouseDown:dn},s.createElement("div",{className:ye("".concat(r,"-rail"),o?.rail),style:de(de({},z),c?.rail)}),s.createElement(ar,{prefixCls:r,style:K,values:Ne,startPoint:V,onStartMove:mn?yt:null}),s.createElement(nr,{prefixCls:r,marks:He,dots:ge,style:ne,activeStyle:Q}),s.createElement(Ka,{ref:U,prefixCls:r,style:G,values:at,draggingIndex:bt,onStartMove:yt,onOffsetChange:fn,onFocus:h,onBlur:x,handleRender:Ee,onChangeComplete:be}),s.createElement(er,{prefixCls:r,marks:He,onClick:St})))});const ir=s.forwardRef((e,t)=>{const{open:a}=e,n=s.useRef(null),r=s.useRef(null);function i(){st.cancel(r.current),r.current=null}function l(){r.current=st(()=>{var o;(o=n.current)===null||o===void 0||o.forceAlign(),r.current=null})}return s.useEffect(()=>(a?l():i(),i),[a,e.title]),s.createElement(Qn,Object.assign({ref:An(n,t)},e))}),or=ir,lr=e=>{const{componentCls:t,antCls:a,controlSize:n,dotSize:r,marginFull:i,marginPart:l,colorFillContentHover:o,handleColorDisabled:c,calc:u}=e;return{[t]:Object.assign(Object.assign({},Gt(e)),{position:"relative",height:n,margin:`${J(l)} ${J(i)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${J(i)} ${J(l)}`},[`${t}-rail`]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:`background-color ${e.motionDurationMid}`},[`${t}-track,${t}-tracks`]:{position:"absolute",transition:`background-color ${e.motionDurationMid}`},[`${t}-track`]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},[`${t}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${t}-rail`]:{backgroundColor:e.railHoverBg},[`${t}-track`]:{backgroundColor:e.trackHoverBg},[`${t}-dot`]:{borderColor:o},[`${t}-handle::after`]:{boxShadow:`0 0 0 ${J(e.handleLineWidth)} ${e.colorPrimaryBorderHover}`},[`${t}-dot-active`]:{borderColor:e.dotActiveBorderColor}},[`${t}-handle`]:{position:"absolute",width:e.handleSize,height:e.handleSize,outline:"none","&::before":{content:'""',position:"absolute",insetInlineStart:u(e.handleLineWidth).mul(-1).equal(),insetBlockStart:u(e.handleLineWidth).mul(-1).equal(),width:u(e.handleSize).add(u(e.handleLineWidth).mul(2)).equal(),height:u(e.handleSize).add(u(e.handleLineWidth).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:e.handleSize,height:e.handleSize,backgroundColor:e.colorBgElevated,boxShadow:`0 0 0 ${J(e.handleLineWidth)} ${e.handleColor}`,borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${e.motionDurationMid},
            inset-block-start ${e.motionDurationMid},
            width ${e.motionDurationMid},
            height ${e.motionDurationMid},
            box-shadow ${e.motionDurationMid}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:u(e.handleSizeHover).sub(e.handleSize).div(2).add(e.handleLineWidthHover).mul(-1).equal(),insetBlockStart:u(e.handleSizeHover).sub(e.handleSize).div(2).add(e.handleLineWidthHover).mul(-1).equal(),width:u(e.handleSizeHover).add(u(e.handleLineWidthHover).mul(2)).equal(),height:u(e.handleSizeHover).add(u(e.handleLineWidthHover).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${J(e.handleLineWidthHover)} ${e.handleActiveColor}`,width:e.handleSizeHover,height:e.handleSizeHover,insetInlineStart:e.calc(e.handleSize).sub(e.handleSizeHover).div(2).equal(),insetBlockStart:e.calc(e.handleSize).sub(e.handleSizeHover).div(2).equal()}}},[`${t}-mark`]:{position:"absolute",fontSize:e.fontSize},[`${t}-mark-text`]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},[`${t}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${t}-dot`]:{position:"absolute",width:r,height:r,backgroundColor:e.colorBgElevated,border:`${J(e.handleLineWidth)} solid ${e.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-rail`]:{backgroundColor:`${e.railBg} !important`},[`${t}-track`]:{backgroundColor:`${e.trackBgDisabled} !important`},[`
          ${t}-dot
        `]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${t}-handle::after`]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:e.handleSize,height:e.handleSize,boxShadow:`0 0 0 ${J(e.handleLineWidth)} ${c}`,insetInlineStart:0,insetBlockStart:0},[`
          ${t}-mark-text,
          ${t}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${a}-tooltip-inner`]:{minWidth:"unset"}})}},on=(e,t)=>{const{componentCls:a,railSize:n,handleSize:r,dotSize:i,marginFull:l,calc:o}=e,c=t?"paddingBlock":"paddingInline",u=t?"width":"height",m=t?"height":"width",S=t?"insetBlockStart":"insetInlineStart",E=t?"top":"insetInlineStart",b=o(n).mul(3).sub(r).div(2).equal(),h=o(r).sub(n).div(2).equal(),x=t?{borderWidth:`${J(h)} 0`,transform:`translateY(${J(o(h).mul(-1).equal())})`}:{borderWidth:`0 ${J(h)}`,transform:`translateX(${J(e.calc(h).mul(-1).equal())})`};return{[c]:n,[m]:o(n).mul(3).equal(),[`${a}-rail`]:{[u]:"100%",[m]:n},[`${a}-track,${a}-tracks`]:{[m]:n},[`${a}-track-draggable`]:Object.assign({},x),[`${a}-handle`]:{[S]:b},[`${a}-mark`]:{insetInlineStart:0,top:0,[E]:o(n).mul(3).add(t?0:l).equal(),[u]:"100%"},[`${a}-step`]:{insetInlineStart:0,top:0,[E]:n,[u]:"100%",[m]:n},[`${a}-dot`]:{position:"absolute",[S]:o(n).sub(i).div(2).equal()}}},sr=e=>{const{componentCls:t,marginPartWithMark:a}=e;return{[`${t}-horizontal`]:Object.assign(Object.assign({},on(e,!0)),{[`&${t}-with-marks`]:{marginBottom:a}})}},cr=e=>{const{componentCls:t}=e;return{[`${t}-vertical`]:Object.assign(Object.assign({},on(e,!1)),{height:"100%"})}},ur=e=>{const a=e.controlHeightLG/4,n=e.controlHeightSM/2,r=e.lineWidth+1,i=e.lineWidth+1*3;return{controlSize:a,railSize:4,handleSize:a,handleSizeHover:n,dotSize:8,handleLineWidth:r,handleLineWidthHover:i,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:e.colorPrimary,handleColorDisabled:new Yt(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexShortString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}},dr=Vt("Slider",e=>{const t=Xt(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[lr(t),sr(t),cr(t)]},ur);var hr=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a};function fr(e,t){return e||e===null?e:t||t===null?t:a=>typeof a=="number"?a.toString():""}const mr=ie.forwardRef((e,t)=>{const{prefixCls:a,range:n,className:r,rootClassName:i,style:l,disabled:o,tooltipPrefixCls:c,tipFormatter:u,tooltipVisible:m,getTooltipPopupContainer:S,tooltipPlacement:E}=e,b=hr(e,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement"]),{direction:h,slider:x,getPrefixCls:C,getPopupContainer:g}=ie.useContext(Kt),f=ie.useContext(Jt),v=o??f,[I,y]=ie.useState({}),$=(B,D)=>{y(P=>Object.assign(Object.assign({},P),{[B]:D}))},p=(B,D)=>B||(D?h==="rtl"?"left":"right":"top"),w=C("slider",a),[k,R]=dr(w),T=ye(r,x?.className,i,{[`${w}-rtl`]:h==="rtl"},R);h==="rtl"&&!b.vertical&&(b.reverse=!b.reverse);const[W,A]=ie.useMemo(()=>n?typeof n=="object"?[!0,n.draggableTrack]:[!0,!1]:[!1],[n]),te=(B,D)=>{var P;const{index:j,dragging:Y}=D,{tooltip:X={},vertical:q}=e,V=Object.assign({},X),{open:K,placement:G,getPopupContainer:z,prefixCls:ne,formatter:Q}=V,Z=fr(Q,u),ge=Z?I[j]||Y:!1,Ee=(P=K??m)!==null&&P!==void 0?P:K===void 0&&ge,H=Object.assign(Object.assign({},B.props),{onMouseEnter:()=>$(j,!0),onMouseLeave:()=>$(j,!1),onFocus:_=>{var O;$(j,!0),(O=b.onFocus)===null||O===void 0||O.call(b,_)},onBlur:_=>{var O;$(j,!1),(O=b.onBlur)===null||O===void 0||O.call(b,_)}});return ie.createElement(or,Object.assign({},V,{prefixCls:C("tooltip",ne??c),title:Z?Z(D.value):"",open:Ee,placement:p(G??E,q),key:j,overlayClassName:`${w}-tooltip`,getPopupContainer:z||S||g}),ie.cloneElement(B,H))},F=Object.assign(Object.assign({},x?.style),l);return k(ie.createElement(rr,Object.assign({},b,{step:b.step,range:W,draggableTrack:A,className:T,style:F,disabled:v,ref:t,prefixCls:w,handleRender:te})))}),Ke=mr;var gr=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],ln=s.forwardRef(function(e,t){var a,n=e.prefixCls,r=n===void 0?"rc-switch":n,i=e.className,l=e.checked,o=e.defaultChecked,c=e.disabled,u=e.loadingIcon,m=e.checkedChildren,S=e.unCheckedChildren,E=e.onClick,b=e.onChange,h=e.onKeyDown,x=dt(e,gr),C=ft(!1,{value:l,defaultValue:o}),g=xe(C,2),f=g[0],v=g[1];function I(w,k){var R=f;return c||(R=w,v(R),b?.(R,k)),R}function y(w){w.which===le.LEFT?I(!1,w):w.which===le.RIGHT&&I(!0,w),h?.(w)}function $(w){var k=I(!f,w);E?.(k,w)}var p=ye(r,i,(a={},pe(a,"".concat(r,"-checked"),f),pe(a,"".concat(r,"-disabled"),c),a));return s.createElement("button",ht({},x,{type:"button",role:"switch","aria-checked":f,disabled:c,className:p,ref:t,onKeyDown:y,onClick:$}),u,s.createElement("span",{className:"".concat(r,"-inner")},s.createElement("span",{className:"".concat(r,"-inner-checked")},m),s.createElement("span",{className:"".concat(r,"-inner-unchecked")},S)))});ln.displayName="Switch";const vr=e=>{const{componentCls:t,trackHeightSM:a,trackPadding:n,trackMinWidthSM:r,innerMinMarginSM:i,innerMaxMarginSM:l,handleSizeSM:o,calc:c}=e,u=`${t}-inner`,m=J(c(o).add(c(n).mul(2)).equal()),S=J(c(l).mul(2).equal());return{[t]:{[`&${t}-small`]:{minWidth:r,height:a,lineHeight:J(a),[`${t}-inner`]:{paddingInlineStart:l,paddingInlineEnd:i,[`${u}-checked`]:{marginInlineStart:`calc(-100% + ${m} - ${S})`,marginInlineEnd:`calc(100% - ${m} + ${S})`},[`${u}-unchecked`]:{marginTop:c(a).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${t}-handle`]:{width:o,height:o},[`${t}-loading-icon`]:{top:c(c(o).sub(e.switchLoadingIconSize)).div(2).equal(),fontSize:e.switchLoadingIconSize},[`&${t}-checked`]:{[`${t}-inner`]:{paddingInlineStart:i,paddingInlineEnd:l,[`${u}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${u}-unchecked`]:{marginInlineStart:`calc(100% - ${m} + ${S})`,marginInlineEnd:`calc(-100% + ${m} - ${S})`}},[`${t}-handle`]:{insetInlineStart:`calc(100% - ${J(c(o).add(n).equal())})`}},[`&:not(${t}-disabled):active`]:{[`&:not(${t}-checked) ${u}`]:{[`${u}-unchecked`]:{marginInlineStart:c(e.marginXXS).div(2).equal(),marginInlineEnd:c(e.marginXXS).mul(-1).div(2).equal()}},[`&${t}-checked ${u}`]:{[`${u}-checked`]:{marginInlineStart:c(e.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:c(e.marginXXS).div(2).equal()}}}}}}},br=e=>{const{componentCls:t,handleSize:a,calc:n}=e;return{[t]:{[`${t}-loading-icon${e.iconCls}`]:{position:"relative",top:n(n(a).sub(e.fontSize)).div(2).equal(),color:e.switchLoadingIconColor,verticalAlign:"top"},[`&${t}-checked ${t}-loading-icon`]:{color:e.switchColor}}}},pr=e=>{const{componentCls:t,trackPadding:a,handleBg:n,handleShadow:r,handleSize:i,calc:l}=e,o=`${t}-handle`;return{[t]:{[o]:{position:"absolute",top:a,insetInlineStart:a,width:i,height:i,transition:`all ${e.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:n,borderRadius:l(i).div(2).equal(),boxShadow:r,transition:`all ${e.switchDuration} ease-in-out`,content:'""'}},[`&${t}-checked ${o}`]:{insetInlineStart:`calc(100% - ${J(l(i).add(a).equal())})`},[`&:not(${t}-disabled):active`]:{[`${o}::before`]:{insetInlineEnd:e.switchHandleActiveInset,insetInlineStart:0},[`&${t}-checked ${o}::before`]:{insetInlineEnd:0,insetInlineStart:e.switchHandleActiveInset}}}}},Sr=e=>{const{componentCls:t,trackHeight:a,trackPadding:n,innerMinMargin:r,innerMaxMargin:i,handleSize:l,calc:o}=e,c=`${t}-inner`,u=J(o(l).add(o(n).mul(2)).equal()),m=J(o(i).mul(2).equal());return{[t]:{[c]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:i,paddingInlineEnd:r,transition:`padding-inline-start ${e.switchDuration} ease-in-out, padding-inline-end ${e.switchDuration} ease-in-out`,[`${c}-checked, ${c}-unchecked`]:{display:"block",color:e.colorTextLightSolid,fontSize:e.fontSizeSM,transition:`margin-inline-start ${e.switchDuration} ease-in-out, margin-inline-end ${e.switchDuration} ease-in-out`,pointerEvents:"none"},[`${c}-checked`]:{marginInlineStart:`calc(-100% + ${u} - ${m})`,marginInlineEnd:`calc(100% - ${u} + ${m})`},[`${c}-unchecked`]:{marginTop:o(a).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${t}-checked ${c}`]:{paddingInlineStart:r,paddingInlineEnd:i,[`${c}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${c}-unchecked`]:{marginInlineStart:`calc(100% - ${u} + ${m})`,marginInlineEnd:`calc(-100% + ${u} - ${m})`}},[`&:not(${t}-disabled):active`]:{[`&:not(${t}-checked) ${c}`]:{[`${c}-unchecked`]:{marginInlineStart:o(n).mul(2).equal(),marginInlineEnd:o(n).mul(-1).mul(2).equal()}},[`&${t}-checked ${c}`]:{[`${c}-checked`]:{marginInlineStart:o(n).mul(-1).mul(2).equal(),marginInlineEnd:o(n).mul(2).equal()}}}}}},xr=e=>{const{componentCls:t,trackHeight:a,trackMinWidth:n}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Gt(e)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:n,height:a,lineHeight:`${J(a)}`,verticalAlign:"middle",background:e.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${e.motionDurationMid}`,userSelect:"none",[`&:hover:not(${t}-disabled)`]:{background:e.colorTextTertiary}}),Fn(e)),{[`&${t}-checked`]:{background:e.switchColor,[`&:hover:not(${t}-disabled)`]:{background:e.colorPrimaryHover}},[`&${t}-loading, &${t}-disabled`]:{cursor:"not-allowed",opacity:e.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${t}-rtl`]:{direction:"rtl"}})}},wr=e=>{const{fontSize:t,lineHeight:a,controlHeight:n,colorWhite:r}=e,i=t*a,l=n/2,o=2,c=i-o*2,u=l-o*2;return{trackHeight:i,trackHeightSM:l,trackMinWidth:c*2+o*4,trackMinWidthSM:u*2+o*2,trackPadding:o,handleBg:r,handleSize:c,handleSizeSM:u,handleShadow:`0 2px 4px 0 ${new Yt("#00230b").setAlpha(.2).toRgbString()}`,innerMinMargin:c/2,innerMaxMargin:c+o+o*2,innerMinMarginSM:u/2,innerMaxMarginSM:u+o+o*2}},yr=Vt("Switch",e=>{const t=Xt(e,{switchDuration:e.motionDurationMid,switchColor:e.colorPrimary,switchDisabledOpacity:e.opacityLoading,switchLoadingIconSize:e.calc(e.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${e.opacityLoading})`,switchHandleActiveInset:"-30%"});return[xr(t),Sr(t),pr(t),br(t),vr(t)]},wr);var Cr=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a};const sn=s.forwardRef((e,t)=>{const{prefixCls:a,size:n,disabled:r,loading:i,className:l,rootClassName:o,style:c,checked:u,value:m,defaultChecked:S,defaultValue:E,onChange:b}=e,h=Cr(e,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[x,C]=ft(!1,{value:u??m,defaultValue:S??E}),{getPrefixCls:g,direction:f,switch:v}=s.useContext(Kt),I=s.useContext(Jt),y=(r??I)||i,$=g("switch",a),p=s.createElement("div",{className:`${$}-handle`},i&&s.createElement(Hn,{className:`${$}-loading-icon`})),[w,k]=yr($),R=Kn(n),T=ye(v?.className,{[`${$}-small`]:R==="small",[`${$}-loading`]:i,[`${$}-rtl`]:f==="rtl"},l,o,k),W=Object.assign(Object.assign({},v?.style),c),A=function(){C(arguments.length<=0?void 0:arguments[0]),b?.apply(void 0,arguments)};return w(s.createElement(ta,{component:"Switch"},s.createElement(ln,Object.assign({},h,{checked:x,onChange:A,prefixCls:$,className:T,style:W,disabled:y,ref:t,loadingIcon:p}))))});sn.__ANT_SWITCH=!0;const Bt=sn;ie.Component;var $r={subtree:!0,childList:!0,attributeFilter:["style","class"]};function Er(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$r;s.useEffect(function(){if(!(!Gn()||!e)){var n,r=Array.isArray(e)?e:[e];return"MutationObserver"in window&&(n=new MutationObserver(t),r.forEach(function(i){n.observe(i,a)})),function(){var i,l;(i=n)===null||i===void 0||i.takeRecords(),(l=n)===null||l===void 0||l.disconnect()}}},[a,e])}const cn=3;function ot(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const n=document.createElement("canvas"),r=n.getContext("2d"),i=e*a,l=t*a;return n.setAttribute("width",`${i}px`),n.setAttribute("height",`${l}px`),r.save(),[r,n,i,l]}function Mr(){function e(t,a,n,r,i,l,o,c){const[u,m,S,E]=ot(r,i,n);if(t instanceof HTMLImageElement)u.drawImage(t,0,0,S,E);else{const{color:X,fontSize:q,fontStyle:V,fontWeight:K,fontFamily:G,textAlign:z}=l,ne=Number(q)*n;u.font=`${V} normal ${K} ${ne}px/${i}px ${G}`,u.fillStyle=X,u.textAlign=z,u.textBaseline="top";const Q=Array.isArray(t)?t:[t];Q?.forEach((Z,ge)=>{u.fillText(Z??"",S/2,ge*(ne+cn*n))})}const b=Math.PI/180*Number(a),h=Math.max(r,i),[x,C,g]=ot(h,h,n);x.translate(g/2,g/2),x.rotate(b),S>0&&E>0&&x.drawImage(m,-S/2,-E/2);function f(X,q){const V=X*Math.cos(b)-q*Math.sin(b),K=X*Math.sin(b)+q*Math.cos(b);return[V,K]}let v=0,I=0,y=0,$=0;const p=S/2,w=E/2;[[0-p,0-w],[0+p,0-w],[0+p,0+w],[0-p,0+w]].forEach(X=>{let[q,V]=X;const[K,G]=f(q,V);v=Math.min(v,K),I=Math.max(I,K),y=Math.min(y,G),$=Math.max($,G)});const R=v+g/2,T=y+g/2,W=I-v,A=$-y,te=o*n,F=c*n,B=(W+te)*2,D=A+F,[P,j]=ot(B,D);function Y(){let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;P.drawImage(C,R,T,W,A,X,q,W,A)}return Y(),Y(W+te,-A/2-F/2),Y(W+te,+A/2+F/2),[j.toDataURL(),B/n,D/n]}return e}function kr(e){const t=ie.useRef(!1),a=ie.useRef(),n=Jn(e);return()=>{t.current||(t.current=!0,n(),a.current=st(()=>{t.current=!1}))}}function Rr(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function jr(e){return Object.keys(e).map(t=>`${Rr(t)}: ${e[t]};`).join(" ")}function Pr(){return window.devicePixelRatio||1}const Ir=(e,t)=>{let a=!1;return e.removedNodes.length&&(a=Array.from(e.removedNodes).some(n=>t(n))),e.type==="attributes"&&t(e.target)&&(a=!0),a},Dr={visibility:"visible !important"};function Lr(e){const[t]=s.useState(()=>new Map);return[(i,l,o)=>{if(o){if(!t.get(o)){const u=document.createElement("div");t.set(o,u)}const c=t.get(o);c.setAttribute("style",jr(Object.assign(Object.assign(Object.assign({},e),{backgroundImage:`url('${i}')`,backgroundSize:`${Math.floor(l)}px`}),Dr))),c.removeAttribute("class"),o.append(c)}},i=>{const l=t.get(i);l&&i&&i.removeChild(l),t.delete(i)},i=>Array.from(t.values()).includes(i)]}function At(e,t){return e.size===t.size?e:t}const Ft=100,qt=100,Tr=e=>{var t,a;const{zIndex:n=9,rotate:r=-22,width:i,height:l,image:o,content:c,font:u={},style:m,className:S,rootClassName:E,gap:b=[Ft,qt],offset:h,children:x,inherit:C=!0}=e,[,g]=Yn(),{color:f=g.colorFill,fontSize:v=g.fontSizeLG,fontWeight:I="normal",fontStyle:y="normal",fontFamily:$="sans-serif",textAlign:p="center"}=u,[w=Ft,k=qt]=b,R=w/2,T=k/2,W=(t=h?.[0])!==null&&t!==void 0?t:R,A=(a=h?.[1])!==null&&a!==void 0?a:T,te=ie.useMemo(()=>{const H={zIndex:n,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let _=W-R,O=A-T;return _>0&&(H.left=`${_}px`,H.width=`calc(100% - ${_}px)`,_=0),O>0&&(H.top=`${O}px`,H.height=`calc(100% - ${O}px)`,O=0),H.backgroundPosition=`${_}px ${O}px`,H},[n,W,R,A,T]),[F,B]=ie.useState(),[D,P]=ie.useState(new Set),j=ie.useMemo(()=>{const H=F?[F]:[];return[].concat(H,we(Array.from(D)))},[F,D]),Y=H=>{let _=120,O=64;if(!o&&H.measureText){H.font=`${Number(v)}px ${$}`;const fe=Array.isArray(c)?c:[c],ue=fe.map(U=>{const ae=H.measureText(U);return[ae.width,ae.fontBoundingBoxAscent+ae.fontBoundingBoxDescent]});_=Math.ceil(Math.max.apply(Math,we(ue.map(U=>U[0])))),O=Math.ceil(Math.max.apply(Math,we(ue.map(U=>U[1]))))*fe.length+(fe.length-1)*cn}return[i??_,l??O]},X=Mr(),[q,V]=ie.useState(null),G=kr(()=>{const _=document.createElement("canvas").getContext("2d");if(_){const O=Pr(),[fe,ue]=Y(_),U=ae=>{const[je,ce]=X(ae||"",r,O,fe,ue,{color:f,fontSize:v,fontStyle:y,fontWeight:I,fontFamily:$,textAlign:p},w,k);V([je,ce])};if(o){const ae=new Image;ae.onload=()=>{U(ae)},ae.onerror=()=>{U(c)},ae.crossOrigin="anonymous",ae.referrerPolicy="no-referrer",ae.src=o}else U(c)}}),[z,ne,Q]=Lr(te);s.useEffect(()=>{q&&j.forEach(H=>{z(q[0],q[1],H)})},[q,j]),Er(j,H=>{H.forEach(_=>{Ir(_,Q)&&G()})}),s.useEffect(G,[r,n,i,l,o,c,f,v,I,y,$,p,w,k,W,A]);const ge=ie.useMemo(()=>({add:H=>{P(_=>{const O=new Set(_);return O.add(H),At(_,O)})},remove:H=>{ne(H),P(_=>{const O=new Set(_);return O.delete(H),At(_,O)})}}),[]),Ee=C?ie.createElement(Tn.Provider,{value:ge},x):x;return ie.createElement("div",{ref:B,className:ye(S,E),style:Object.assign({position:"relative"},m)},Ee)},Or=Tr;function Wr(e){const[t,a]=s.useState([]),[n,r]=s.useState({});return s.useEffect(()=>(wn(e).then(({colors:i,width:l,height:o})=>{a(i),r({width:l,height:o})}),()=>{a([]),r({})}),[e]),{imgColors:t,imgSize:n}}const Ut=["rect","filledRect","circle","line","arrow","pencil"];function zr(){const[e,t]=s.useState(""),a=s.useRef(!1),[n,r]=s.useState([]),[i,l]=s.useState("#df4b26"),[o,c]=s.useState(4),[u,m]=s.useState(null),S=s.useRef(null);return s.useEffect(()=>{const y=In(window,{Backspace:$=>{$.preventDefault(),u&&(r(n.filter(p=>p.id!==u)),m(null))},Delete:$=>{$.preventDefault(),u&&(r(n.filter(p=>p.id!==u)),m(null))},Escape:$=>{$.preventDefault(),u&&m(null),t("")}});return()=>{y()}},[u,n]),{canvasRef:S,shapes:n,setShapes:r,annotateWidth:o,onAnnotateWidthChange:y=>{if(c(y),u){const $=n.find(p=>p.id===u);$&&$.strokeWidth&&($.strokeWidth=y)}},tool:e,toSelect:y=>{if(m(null),e===y)return t("");t(y)},toClearAll:()=>{r([])},toRest:()=>{t(""),m(null)},annotateColor:i,onAnnotateChange:y=>{const $=y.toHexString();if(l($),u){const p=n.find(w=>w.id===u);p&&p.color&&(p.color=$)}},setSelectedId:m,selectedId:u,handleMouseDown:y=>{if(y.target===y.target.getStage())m(null);else return;if(!Ut.includes(e))return;a.current=!0;const p=y.target.getStage().getPointerPosition(),k={id:`${e}-${new Date().getTime()}`,type:e,points:[p.x,p.y],color:i,strokeWidth:o};["rect","filledRect"].includes(e)&&(k.width=0,k.height=0),e==="circle"&&(k.radius=0),e==="arrow"&&(k.x=p.x,k.y=p.y,k.pointerLength=12,k.pointerWidth=12),r([...n,k])},handleMouseMove:y=>{if(!Ut.includes(e)||!a.current)return;const p=y.target.getStage().getPointerPosition();let w=n[n.length-1];if(w.type==="pencil"&&(w.points=w.points.concat([p.x,p.y])),["line","arrow"].includes(w.type)&&(w.points=w.points=[w.points[0],w.points[1],p.x,p.y]),["rect","filledRect"].includes(w.type)&&(w.width=p.x-w.points[0],w.height=p.y-w.points[1]),w.type==="circle"){const k=Math.pow(p.x-w.points[0],2),R=Math.pow(p.y-w.points[1],2);w.radius=Math.sqrt(k+R)}n.splice(n.length-1,1,w),r(n.concat())},handleMouseUp:()=>{a.current&&(a.current=!1,e!=="pencil"&&t(""))},onEmojiSelect:y=>{const $=S.current.width()/2-90,p=S.current.height()/2-90;r([...n,{id:`emoji-${new Date().getTime()}`,text:y,fontSize:960,type:"emoji",x:$,y:p,scale:{x:.1875,y:.1875}}])}}}const lt=["macbookPro","iphonePro"],{Dragger:Hr}=na;function ki(){const[e,t]=zn.useMessage(),a=s.useRef(null),[n,r]=s.useState(!1),[i,l]=s.useState(!1),[o,c]=s.useState(""),[u,m]=s.useState(150),[S,E]=s.useState(0),[b,h]=s.useState("rgba(255,255,255,.85)"),[x,C]=s.useState(10),[g,f]=s.useState(3),[v,I]=s.useState("none"),[y,$]=s.useState(4/3),[p,w]=s.useState({label:"4 : 3",key:"4_3",icon:d.jsx(Be,{name:"Square",className:"[&_rect]:w-[20px]",size:16}),width:1200,height:900}),[k,R]=s.useState("default_1"),[T,W]=s.useState(!1),[A,te]=s.useState("Shot Easy"),[F,B]=s.useState("rgba(0,0,0,.15)"),[D,P]=s.useState(11),[j,Y]=s.useState(-22),[X,q]=s.useState("cover"),[V,K]=s.useState(!1),{imgColors:G,imgSize:z}=Wr(o),[ne,Q]=s.useState(600-u),{canvasRef:Z,shapes:ge,setShapes:Ee,annotateWidth:H,onAnnotateWidthChange:_,tool:O,toSelect:fe,toRest:ue,toClearAll:U,annotateColor:ae,onAnnotateChange:je,setSelectedId:ce,selectedId:Pe,handleMouseDown:Me,handleMouseMove:et,handleMouseUp:He,onEmojiSelect:tt}=zr(),Ve=s.useMemo(()=>{let M={};if(Le[k])return M;try{M=JSON.parse(k)}catch{}return M},[k]);s.useEffect(()=>{if(Q(600-u),!z?.width||z.width>z.height)return;const M=600/y-u;Q(M*z.width/z.height)},[u,z,y]),s.useEffect(()=>{p.key==="auto"&&z.width&&$(z.width/z.height)},[z,p]),s.useEffect(()=>{n?document.querySelector("body").style.overflow="hidden":document.querySelector("body").style.overflow=""},[n]),Ln(M=>{ue(),U(),Le[k]||R("default_1"),c(window.URL.createObjectURL(M))}),Dn(()=>qe(),()=>Se(),[o]);const _e=M=>(c(window.URL.createObjectURL(M)),!1),Xe=M=>{B(typeof M=="string"?M:M.toRgbString())},Ge=()=>new Promise((M,se)=>{ue(),Va(a.current,{cacheBust:!1,canvasWidth:p.key==="auto"?z.width:p.width,canvasHeight:p.key==="auto"?z.height:p.height,filter:be=>!be.classList?.contains("konvajs-content")}).then(be=>{const ke=be.getContext("2d"),Ie=Z.current.toCanvas({pixelRatio:(p.key==="auto"?z.width:p.width)/600});ke.drawImage(Ie,0,0),M(be)}).catch(se)}),qe=()=>{l(!0),Ge().then(M=>{const se=M.toDataURL();yn(se,"shotEasy.png"),e.success("Download Success!")}).catch(M=>{console.log(M),e.error("Download Failed!")}).finally(()=>{l(!1)})},Se=()=>{l(!0),Ge().then(M=>{M.toBlob(se=>{Cn(se).then(()=>{e.success("Copied Success!")}).catch(()=>{e.error("Copy Failed!")})},"image/png")}).catch(M=>{console.log(M),e.error("Copy Failed!")}).finally(()=>{l(!1)})},nt=()=>{c(""),ue(),U(),Le[k]||R("default_1")},ve=({label:M,key:se,width:be,height:ke,icon:Ie})=>{w({key:se,label:M,width:be,height:ke,icon:Ie}),se==="auto"?z.width&&$(z.width/z.height):$(be/ke)},Te=()=>{Mn().then(M=>{if(!M){e.error("Capture screen Failed!");return}ue(),U(),Le[k]||R("default_1"),c(M)})};return d.jsxs(d.Fragment,{children:[t,d.jsxs("div",{className:Ae("polka flex flex-col rounded-md shadow-lg border-t overflow-hidden border-t-gray-600 antialiased",n?"w-full h-full fixed z-10 top-0 left-0":"min-h-[680px]"),children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between items-center shrink-0 gap-1 bg-white p-2 border-b border-b-gray-50 shadow-sm relative z-0",children:[d.jsx(Pn,{disabled:!o,tool:O,toSelect:fe,isFull:n,onFullChange:r,annotateColor:ae,onAnnotateChange:je,annotateWidth:H,onWidthChange:_,toCapture:Te,onEmojiSelect:tt}),d.jsxs("div",{className:"flex gap-1 md:gap-4 justify-center items-center",children:[d.jsxs("div",{className:"px-0 text-xs opacity-80 md:px-2",children:[p.key==="auto"?`${z.width} x ${z.height}`:`${p.width} x ${p.height}`," px"]}),d.jsx(Wn,{disabled:!o,loading:i,toDownload:qe,toCopy:Se}),d.jsx(Pt,{type:"text",disabled:!o,loading:i,icon:d.jsx(Be,{name:"Eraser"}),onClick:nt})]})]}),d.jsxs("div",{className:"flex flex-col flex-1 h-0 md:flex-row md:items-stretch",children:[d.jsx("div",{className:"md:w-0 md:flex-1 overflow-auto select-none p-5",children:d.jsx("div",{className:"min-w-full md:min-w-[600px] min-h-full flex items-center justify-center",children:d.jsxs("div",{ref:a,className:Ae("relative overflow-hidden w-full md:w-[600px]",$n(k),O==="pencil"?"pencil":O?"cursor-crosshair":""),style:{aspectRatio:y,...Ve},children:[k.includes("_img_")&&d.jsx("img",{src:`${Le[k]}&w=1200`,className:"w-full h-full absolute z-0 object-cover object-center"}),d.jsx(Or,{rootClassName:"w-full md:w-[600px] h-full",content:T?A:"",font:{color:F},rotate:j,zIndex:D,children:d.jsxs("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:[!o&&d.jsxs(Hr,{accept:En.join(","),name:"file",showUploadList:!1,beforeUpload:_e,rootClassName:"p-4 rounded-md bg-white",children:[d.jsx("p",{className:"text-2xl",children:d.jsx(Be,{name:"ImagePlus"})}),d.jsxs("p",{className:"text-sm px-4",children:["Click or Drag image to this area",d.jsx("br",{}),"or Paste image"]})]}),o&&v==="macbookPro"&&d.jsx(kn,{width:600-u,img:o,fit:X,style:{padding:`${S}px`,backgroundColor:b}}),o&&v==="iphonePro"&&d.jsx(Rn,{height:600/y-u,img:o,shadow:g,fit:X,style:{padding:`${S}px`,backgroundColor:b}}),o&&!lt.includes(v)&&d.jsxs("div",{className:Ae("overflow-hidden translate-x-0 transition-all opacity-100",g===0&&"shadow-none",g===1&&"shadow",g===2&&"shadow-sm",g===3&&"shadow-md",g===4&&"shadow-lg",g===5&&"shadow-xl",g===6&&"shadow-2xl",v==="light"&&"bg-white/40 p-1.5",v==="dark"&&"bg-black/30 p-1.5"),style:{width:`${ne}px`,borderRadius:`${x}px`},children:[v.includes("sBar")&&d.jsxs("div",{className:Ae("w-full px-2 h-8 flex justify-start",v==="macosBarLight"&&"bg-[#f0f0f0] border-b border-b-[#e0e0e0]",v==="macosBarDark"&&"bg-[#3a3a3c] border-b border-b-[#4a4a4c]",v.includes("windows")&&"justify-end",v==="windowsBarLight"&&"bg-white text-black",v==="windowsBarDark"&&"bg-gray-700 text-white"),children:[v.includes("macos")&&d.jsx(jt.macos,{className:"h-full"}),v.includes("windows")&&d.jsx(jt.windows,{className:"h-full"})]}),d.jsx("div",{className:"overflow-hidden w-full flex items-center",style:{padding:`${S}px`,borderRadius:`${(v==="light"||v==="dark")&&x-2>0?x-2:0}px`,backgroundColor:b},children:d.jsx("img",{src:o,className:"w-full"})})]})]})}),o&&d.jsx(pn,{className:"w-full h-full absolute top-0 left-0 z-10 overflow-hidden",width:600,height:600/y,onMouseDown:Me,onMousemove:et,onMouseup:He,ref:Z,children:d.jsx(Sn,{children:ge.map((M,se)=>d.jsx(xn,{shape:M,isSelected:M.id===Pe,onSelect:()=>{ce(M.id)},onChange:be=>{const ke=ge.slice();ke[se]=be,Ee(ke)}},se))})})]})})}),d.jsxs("div",{className:"bg-white flex flex-col gap-2 p-4 md:w-[340px] border-l border-l-gray-50 shadow-lg relative z-10",children:[d.jsx(On,{value:k,showMore:V,onChange:K,onSelectChange:R,photoUrl:o,imgColors:G,imgSize:z}),d.jsxs("div",{className:"[&_label]:font-semibold [&_label]:text-sm",children:[d.jsx("label",{children:"Margin"}),d.jsx(Ke,{min:0,max:300,onChange:m,value:typeof u=="number"?u:0})]}),d.jsxs("div",{className:"[&_label]:font-semibold [&_label]:text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("label",{children:"Padding"}),d.jsx(It,{value:b,onChange:M=>h(M.toRgbString()),size:"small"})]}),d.jsx(Ke,{min:0,max:60,onChange:E,value:typeof S=="number"?S:0})]}),!lt.includes(v)&&d.jsxs("div",{className:"[&_label]:font-semibold [&_label]:text-sm",children:[d.jsx("label",{children:"Roundness"}),d.jsx(Ke,{min:0,max:20,onChange:C,value:typeof x=="number"?x:0})]}),v!=="macbookPro"&&d.jsxs("div",{className:"[&_label]:font-semibold [&_label]:text-sm",children:[d.jsx("label",{children:"Shadow"}),d.jsx(Ke,{min:0,max:6,onChange:f,value:typeof g=="number"?g:0})]}),d.jsxs("div",{className:"[&_label]:font-semibold [&_label]:text-sm",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{children:"Background"}),d.jsxs(Pt,{type:"text",size:"small",className:"text-xs flex items-center opacity-80 m-0",onClick:()=>K(!0),children:["More",d.jsx(Be,{name:"ChevronRight",style:{marginLeft:0}})]})]}),d.jsx("div",{className:"py-3",children:d.jsxs($e.Group,{onChange:M=>R(M.target.value),value:k,rootClassName:"grid grid-cols-7 [&_span]:ps-0",children:[d.jsx($e,{className:"[&_.ant-radio]:hidden [&_span]:p-0 mr-0",value:"default_1",children:d.jsx("div",{className:Ae("w-8 h-8 rounded-full",Le.default_1)})}),Object.keys(Le).map((M,se)=>{if(M.includes("default")&&M!=="default_1")return d.jsx($e,{className:"[&_.ant-radio]:hidden [&_span]:p-0 mr-0",value:M,children:d.jsx("div",{className:Ae("w-8 h-8 rounded-full",Le[M])})},M)})]})})]}),d.jsxs("div",{className:"[&_label]:font-semibold [&_label]:text-sm flex justify-between items-center",children:[d.jsx("label",{children:"Canvas"}),d.jsx(jn,{defaultValue:p,onClick:ve})]}),d.jsxs("div",{className:"[&_label]:font-semibold [&_label]:text-sm flex justify-between items-center",children:[d.jsx("label",{children:"Frame"}),d.jsx(Zn,{defaultValue:v,style:{width:"50%"},onChange:I,options:[{value:"none",label:"None"},{value:"light",label:"Light Glass"},{value:"dark",label:"Dark Glass"},{value:"macbookPro",label:"Macbook Pro M3"},{value:"iphonePro",label:"Iphone 15 Pro"},{value:"macosBarLight",label:"MacOS Light"},{value:"macosBarDark",label:"MacOS Dark"},{value:"windowsBarLight",label:"Windows Light"},{value:"windowsBarDark",label:"Windows Dark"}]})]}),lt.includes(v)&&d.jsxs("div",{className:"flex items-center justify-between text-xs",children:[d.jsx("label",{}),d.jsx("div",{children:d.jsxs($e.Group,{defaultValue:X,onChange:M=>q(M.target.value),size:"small",children:[d.jsx($e.Button,{value:"contain",className:"text-xs",children:"Contain"}),d.jsx($e.Button,{value:"cover",className:"text-xs",children:"Cover"}),d.jsx($e.Button,{value:"fill",className:"text-xs",children:"Fill"})]})})]}),d.jsxs("div",{className:"[&_label]:font-semibold [&_label]:text-sm flex gap-4 items-center",children:[d.jsx("label",{children:"Watermark"}),d.jsx(Bt,{defaultChecked:T,onChange:M=>W(M),size:"small",className:"bg-slate-200"})]}),T&&d.jsxs("div",{className:"[&_label]:font-semibold [&_label]:text-xs grid gap-2 pl-4",children:[d.jsx(ea,{defaultValue:A,placeholder:"Watermark content",onChange:M=>te(M.target.value)}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("label",{children:"Color"}),d.jsx(It,{value:F,onChange:Xe,size:"small"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("label",{children:"Direction"}),d.jsx("div",{children:d.jsxs($e.Group,{defaultValue:j,onChange:M=>Y(M.target.value),size:"small",children:[d.jsx($e.Button,{value:-22,children:d.jsx(Be,{name:"ArrowUpRight",className:"mt-[3px]"})}),d.jsx($e.Button,{value:22,children:d.jsx(Be,{name:"ArrowDownRight",className:"mt-[3px]"})})]})})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("label",{children:"Only Background"}),d.jsx(Bt,{size:"small",onChange:M=>P(M?9:11),className:"bg-slate-200"})]})]})]})]})]})]})}export{ki as default};
