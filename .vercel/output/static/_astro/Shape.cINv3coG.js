import{j as o}from"./jsx-runtime.l6YZH1ic.js";import{r as u}from"./index.OjgoNOWw.js";import{L as s,R as x,C as m,A as y,T as k,a as c}from"./ReactKonvaCore.BpeN4Hvy.js";import"./index.p7hr_Xrf.js";const W=({shape:t,isSelected:f,onSelect:r,onChange:e,...n})=>{const d=u.useRef(null),l=u.useRef(null);return u.useEffect(()=>{f&&(l.current.nodes([d.current]),l.current.getLayer().batchDraw())},[f]),o.jsxs(o.Fragment,{children:[(t.type==="pencil"||t.type==="line")&&o.jsx(s,{...n,ref:d,points:t.points,stroke:t.color,strokeWidth:+t.strokeWidth,id:t.id,tension:.5,lineCap:"round",lineJoin:"round",draggable:!0,globalCompositeOperation:"source-over",onClick:r,onTap:r}),t.type==="rect"&&o.jsx(x,{...n,ref:d,x:t.points[0],y:t.points[1],width:t.width,height:t.height,stroke:t.color,strokeWidth:+t.strokeWidth,id:t.id,draggable:!0,onClick:r,onTap:r,onDragEnd:i=>{e({...t,points:[i.target.x(),i.target.y()]})}}),t.type==="filledRect"&&o.jsx(x,{...n,ref:d,x:t.points[0],y:t.points[1],width:t.width,height:t.height,fill:t.color,id:t.id,draggable:!0,onClick:r,onTap:r,onDragEnd:i=>{e({...t,points:[i.target.x(),i.target.y()]})}}),t.type==="circle"&&o.jsx(m,{...n,ref:d,x:t.points[0],y:t.points[1],radius:t.radius,stroke:t.color,strokeWidth:+t.strokeWidth,id:t.id,draggable:!0,onClick:r,onTap:r,onDragEnd:i=>{e({...t,points:[i.target.x(),i.target.y()]})}}),t.type==="arrow"&&o.jsx(y,{...n,ref:d,points:t.points,fill:t.color,stroke:t.color,strokeWidth:+t.strokeWidth,pointerLength:t.pointerLength,pointerWidth:t.pointerWidth,id:t.id,draggable:!0,onClick:r,onTap:r}),t.type==="emoji"&&o.jsx(k,{...n,ref:d,x:t.x,y:t.y,text:t.text,scale:t.scale,fontSize:t.fontSize,fontFamily:"Arial",id:t.id,draggable:!0,onClick:r,onTap:r,onDragEnd:i=>{e({...t,x:i.target.x(),y:i.target.y()})},onTransformEnd:i=>{e({...t,scale:i.target.scale()})}}),f&&o.jsx(c,{ref:l,flipEnabled:!1,boundBoxFunc:(i,g)=>Math.abs(g.width)<5||Math.abs(g.height)<5?i:g,anchorStyleFunc:i=>{i.cornerRadius(10),(i.hasName("top-center")||i.hasName("bottom-center"))&&(i.height(6),i.offsetY(3),i.width(30),i.offsetX(15)),(i.hasName("middle-left")||i.hasName("middle-right"))&&(i.height(30),i.offsetY(15),i.width(6),i.offsetX(3))}})]})};export{W as ShapeLine};
