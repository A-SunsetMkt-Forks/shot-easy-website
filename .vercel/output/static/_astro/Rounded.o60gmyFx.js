import{j as t}from"./jsx-runtime.l6YZH1ic.js";import{r as i}from"./index.OjgoNOWw.js";import{Icon as U}from"./Icons.tgBymh6s.js";import{DownBtn as $}from"./DownBtn.349ZLWXT.js";import{UploadDragger as V}from"./UploadDragger.ONu3kUQc.js";import{t as k,o as A,j as H,c as F,e as G,n as I}from"./utils.laoKADR4.js";import{u as L}from"./useKeyboardShortcuts.7wPXgwmH.js";import{u as _}from"./usePaste.lqKQ1tp5.js";import{m as K}from"./index.HtDAqBSS.js";import{I as q}from"./index.RQZhvM3G.js";import{B as u}from"./button.ncRKj3GL.js";import{_ as z}from"./toArray.nS7GZgeY.js";import{A as j}from"./Portal.Pe3gDrPT.js";import"./index.rPfIouvQ.js";import"./reactNode.B2HQCb_2.js";import"./index.p7hr_Xrf.js";import"./useSize.RVMIuZji.js";import"./index.9yN8RVW1.js";import"./index.AGIWuGJs.js";import"./pickAttrs.PdgW-4Wc.js";import"./collapse.aS6vX33V.js";import"./EyeOutlined.kiebVQeb.js";import"./progress.KQvPVk93.js";import"./CheckOutlined.P7VL5mZ2.js";import"./CloseOutlined.0lRK38iS.js";import"./KeyCode.at7loAuH.js";import"./useCSSVarCls.MDYFJu2S.js";import"./context.RmN6aBgd.js";var J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M712 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm2-696h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM136 374h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0-174h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm752 624h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-348 0h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-230 72h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm230 624H358c-87.3 0-158-70.7-158-158V484c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v182c0 127 103 230 230 230h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"radius-bottomleft",theme:"outlined"};const Q=J;var W=function(r,a){return i.createElement(j,z({},r,{ref:a,icon:Q}))};const X=i.forwardRef(W);var Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M368 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-58-624h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm578 102h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm292 72h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm174 0h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm230 276h-56c-4.4 0-8 3.6-8 8v182c0 87.3-70.7 158-158 158H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c127 0 230-103 230-230V484c0-4.4-3.6-8-8-8z"}}]},name:"radius-bottomright",theme:"outlined"};const Z=Y;var c8=function(r,a){return i.createElement(j,z({},r,{ref:a,icon:Z}))};const t8=i.forwardRef(c8);var e8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M656 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm58 624h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm696-696h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-348 0h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-174 0h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm174-696H358c-127 0-230 103-230 230v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-87.3 70.7-158 158-158h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"radius-upleft",theme:"outlined"};const s8=e8;var i8=function(r,a){return i.createElement(j,z({},r,{ref:a,icon:s8}))};const a8=i.forwardRef(i8);var o8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M368 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-2 696h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm522-174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 174h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm348 0h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm174 0h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-48-696H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c87.3 0 158 70.7 158 158v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-127-103-230-230-230z"}}]},name:"radius-upright",theme:"outlined"};const r8=o8;var n8=function(r,a){return i.createElement(j,z({},r,{ref:a,icon:r8}))};const h8=i.forwardRef(n8);function V8(){const[h,r]=K.useMessage(),a=i.useRef(null),[b,y]=i.useState(!1),[l,O]=i.useState(""),[n,R]=i.useState(""),[p,S]=i.useState(30),[o,C]=i.useState(["tl","tr","bl","br"]),[w,N]=i.useState(!1);_(async e=>{I(e).then(c=>{f(c,p,o),R(c)}).catch(c=>console.error(c))}),L(()=>B(),()=>M(),[l]);const P=async e=>{const c=await I(e);return f(c,p,o),R(c),Promise.reject()},f=(e,c=0,v=[])=>{const g=a.current,s=g.getContext("2d"),{width:d,height:m}=e;g.width=d,g.height=m,s.save(),s.moveTo(0,c),s.beginPath(),v.includes("tr")?(s.lineTo(d-c,0),s.arc(d-c,c,c,1.5*Math.PI,2*Math.PI)):s.lineTo(d,0),v.includes("br")?(s.lineTo(d,m-c),s.arc(d-c,m-c,c,0,.5*Math.PI)):s.lineTo(d,m),v.includes("bl")?(s.lineTo(c,m),s.arc(c,m-c,c,.5*Math.PI,1*Math.PI)):s.lineTo(0,m),v.includes("tl")?(s.lineTo(0,c),s.arc(c,c,c,1*Math.PI,1.5*Math.PI)):s.lineTo(0,0),s.clip(),s.drawImage(e,0,0,e.width,e.height),s.restore();const E=g.toDataURL("image/png");O(E)},x=e=>{const c=o.includes(e)?o.filter(v=>v!==e):[e,...o];C(c),n&&f(n,p,c)},D=e=>{S(e),n&&f(n,e,o)},B=()=>{k(l,"shotEasy.png"),h.success("Download Success!")},M=()=>{y(!0),A(l).then(e=>{H(e).then(()=>{h.success("Copied Success!")}).catch(()=>{h.error("Copy Failed!")})}).catch(e=>{h.error("Copy Failed!")}).finally(()=>{y(!1)})},T=()=>{O(""),R("")};return t.jsxs(t.Fragment,{children:[r,t.jsxs("div",{className:F("rounded-md shadow-lg border-t overflow-hidden border-t-gray-600 antialiased",w?"tr":"polka"),children:[t.jsxs("div",{className:"flex gap-4 justify-center flex-col-reverse bg-white p-2 border-b shadow-md md:flex-row md:justify-between",children:[t.jsxs("div",{className:"flex items-center justify-center gap-3",children:[t.jsx("div",{className:"w-32",children:t.jsx(q,{min:0,keyboard:!0,defaultValue:p,addonAfter:"px",onChange:D})}),t.jsx(u,{size:"small",type:o.includes("tl")?"primary":"dashed",shape:"circle",onClick:()=>x("tl"),icon:t.jsx(a8,{})}),t.jsx(u,{size:"small",type:o.includes("tr")?"primary":"dashed",shape:"circle",onClick:()=>x("tr"),icon:t.jsx(h8,{})}),t.jsx(u,{size:"small",type:o.includes("bl")?"primary":"dashed",shape:"circle",onClick:()=>x("bl"),icon:t.jsx(X,{})}),t.jsx(u,{size:"small",type:o.includes("br")?"primary":"dashed",shape:"circle",onClick:()=>x("br"),icon:t.jsx(t8,{})}),t.jsx(u,{type:"text",shape:"circle",className:w&&"text-[#1677ff]",icon:t.jsx(U,{name:"Grip"}),onClick:()=>N(!w)})]}),t.jsxs("div",{className:"flex gap-3 items-center justify-center",children:[n&&t.jsxs("div",{className:"text-xs opacity-60",children:[n.width," x ",n.height," px"]}),t.jsx($,{disabled:!l,loading:b,toDownload:B,toCopy:M}),t.jsx(u,{type:"text",disabled:!l,loading:b,icon:t.jsx(U,{name:"Eraser"}),onClick:T})]})]}),t.jsx("div",{className:"relative min-h-[200px] p-10",children:t.jsxs("div",{className:"flex w-full items-center justify-center z-10",children:[!l&&t.jsx(V,{beforeUpload:P}),l&&t.jsx("div",{className:"overflow-hidden max-w-[80%]",style:{width:G(n.width,n.height).width+"px"},children:t.jsx("img",{src:l,className:"w-full"})})]})})]}),t.jsx("canvas",{ref:a,className:"hidden"})]})}export{V8 as default};
